{"version":3,"file":"index.js","sources":["../src/index.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\n\ninterface GalleryProps {\n    accessToken: string;\n    count: number;\n    pagination?: boolean;\n}\n\nexport const InstagramGallery = (props: GalleryProps) => {\n    const [loading, setLoading] = useState<Boolean>(true);\n    const [error, setError] = useState<Boolean>(false);\n    const [instagramData, setInstagramData] = useState<any>(null);\n    const [usePagination, setUsePagination] = useState<boolean>(false);\n    const [paginationNextUrl, setPaginationNextUrl] = useState<string>(\"\");\n    const [paginationPrevUrl, setPaginationPrevUrl] = useState<string>(\"\");\n\n    const fetchInstagramData = (url: string) => {\n        fetch(url)\n            .then((response) => {\n                return response.json();\n            })\n            .then((data) => {\n                console.log({ data });\n                if (data.hasOwnProperty(\"error\")) {\n                    setLoading(false);\n                    setError(true);\n                } else {\n                    setInstagramData(data);\n                    setLoading(false);\n                }\n            })\n            .catch((error) => {\n                console.error(\"Error:\", error);\n                setError(true);\n                setLoading(false);\n            });\n    };\n\n    useEffect(() => {\n        const url = `https://graph.instagram.com/me/media?fields=media_count,media_type,permalink,media_url,caption&limit=${props.count}&access_token=${props.accessToken}`;\n        fetchInstagramData(url);\n    }, []);\n\n    useEffect(() => {\n        if (props.pagination) {\n            setUsePagination(props.pagination);\n        }\n    }, [props]);\n\n    useEffect(() => {\n        if (instagramData !== null) {\n            setPaginationNextUrl(instagramData.paging.next);\n            setPaginationPrevUrl(instagramData.paging.previous);\n        }\n    }, [instagramData]);\n\n    const handlePaginationNext = () => {\n        fetchInstagramData(paginationNextUrl);\n    };\n\n    const handlePaginationPrev = () => {\n        fetchInstagramData(paginationPrevUrl);\n    };\n\n    if (loading) {\n        return <div className=\"instagram-gallery\">LOADING...</div>;\n    }\n\n    if (error) {\n        return (\n            <div className=\"instagram-gallery\">\n                Ruh Roh!. Something went wrong.\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"instagram-gallery\">\n            {instagramData.data\n                .slice(0, props.count)\n                .map((item: any, index: any) => (\n                    <div key={index} className=\"instagram-item\">\n                        <a\n                            key={index}\n                            href={item.permalink}\n                            className=\"instagram-link\"\n                            target=\"_blank\"\n                            rel=\"noreferrer\"\n                        >\n                            {item.media_type === \"IMAGE\" ||\n                            item.media_type === \"CAROUSEL_ALBUM\" ? (\n                                <img\n                                    className=\"instagram-image\"\n                                    key={index}\n                                    src={item.media_url}\n                                    alt={item.caption}\n                                />\n                            ) : (\n                                <video className=\"instagram-image\" key={index}>\n                                    <source\n                                        src={item.media_url}\n                                        type=\"video/mp4\"\n                                    />\n                                </video>\n                            )}\n                        </a>\n                    </div>\n                ))}\n            {usePagination && (\n                <div className=\"pagination\">\n                    {paginationPrevUrl && (\n                        <button\n                            className=\"pagination-btn pagination-prev\"\n                            type=\"button\"\n                            onClick={handlePaginationPrev}\n                        >\n                            Previous\n                        </button>\n                    )}\n                    {paginationNextUrl && (\n                        <button\n                            className=\"pagination-btn pagination-next\"\n                            type=\"button\"\n                            onClick={handlePaginationNext}\n                        >\n                            Next\n                        </button>\n                    )}\n                </div>\n            )}\n        </div>\n    );\n};\n"],"names":["InstagramGallery","props","fetchInstagramData","url","fetch","then","response","json","data","console","log","hasOwnProperty","setLoading","setError","setInstagramData","catch","error","_a","useState","loading","_b","_c","instagramData","_d","usePagination","setUsePagination","_e","paginationNextUrl","setPaginationNextUrl","_f","paginationPrevUrl","setPaginationPrevUrl","useEffect","count","accessToken","pagination","paging","next","previous","React","className","slice","map","item","index","key","href","permalink","target","rel","media_type","src","media_url","alt","caption","type","onClick"],"mappings":"8NAQaA,iBAAmB,SAACC,GAQF,SAArBC,EAAsBC,GACxBC,MAAMD,GACDE,KAAK,SAACC,GACH,OAAOA,EAASC,SAEnBF,KAAK,SAACG,GACHC,QAAQC,IAAI,CAAEF,SACVA,EAAKG,eAAe,UACpBC,GAAW,GACXC,GAAS,KAETC,EAAiBN,GACjBI,GAAW,MAGlBG,MAAM,SAACC,GACJP,QAAQO,MAAM,SAAUA,GACxBH,GAAS,GACTD,GAAW,KAzBjB,IAAAK,EAAwBC,gBAAkB,GAAzCC,OAASP,OACVQ,EAAoBF,gBAAkB,GAArCF,OAAOH,OACRQ,EAAoCH,eAAc,MAAjDI,OAAeR,OAChBS,EAAoCL,gBAAkB,GAArDM,OAAeC,OAChBC,EAA4CR,eAAiB,IAA5DS,OAAmBC,OACpBC,EAA4CX,eAAiB,IAA5DY,OAAmBC,OAwB1BC,gBAAU,WACN,IAAM7B,EAAM,wGAAwGF,EAAMgC,uBAAsBhC,EAAMiC,YACtJhC,EAAmBC,IACpB,IAEH6B,gBAAU,WACF/B,EAAMkC,YACNV,EAAiBxB,EAAMkC,aAE5B,CAAClC,IAEJ+B,gBAAU,WACgB,OAAlBV,IACAM,EAAqBN,EAAcc,OAAOC,MAC1CN,EAAqBT,EAAcc,OAAOE,YAE/C,CAAChB,IAUJ,OAAIH,EACOoB,4CAAKC,UAAU,mCAGtBxB,EAEIuB,4CAAKC,UAAU,wDAOnBD,4CAAKC,UAAU,qBACVlB,EAAcd,KACViC,MAAM,EAAGxC,EAAMgC,OACfS,IAAI,SAACC,EAAWC,GAAe,OAC5BL,4CAAKM,IAAKD,EAAOJ,UAAU,kBACvBD,0CACIM,IAAKD,EACLE,KAAMH,EAAKI,UACXP,UAAU,iBACVQ,OAAO,SACPC,IAAI,cAEiB,UAApBN,EAAKO,YACc,mBAApBP,EAAKO,WACDX,4CACIC,UAAU,kBACVK,IAAKD,EACLO,IAAKR,EAAKS,UACVC,IAAKV,EAAKW,UAGdf,8CAAOC,UAAU,kBAAkBK,IAAKD,GACpCL,+CACIY,IAAKR,EAAKS,UACVG,KAAK,mBAOhC/B,GACGe,4CAAKC,UAAU,cACVV,GACGS,+CACIC,UAAU,iCACVe,KAAK,SACLC,QAtDK,WACzBtD,EAAmB4B,iBA0DNH,GACGY,+CACIC,UAAU,iCACVe,KAAK,SACLC,QAnEK,WACzBtD,EAAmByB"}